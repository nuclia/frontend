<div class="client-dialog">
  <h1>{{ (editMode ? 'account.edit_nua_key' : 'account.create_nua_key') | translate }}</h1>
  <button class="close-button"
          (click)="close()">
    <svg-icon src="assets/icons/close.svg"></svg-icon>
  </button>

  <form [formGroup]="clientForm"
        (ngSubmit)="save()">
    <div class="mb-12"
         fxLayout="row">
      <label for="client-title"
             fxFlex="24%">
        {{ 'account.nua_client' | translate }}*
      </label>
      <div fxFlex="auto">
        <stf-input id="client-title"
                   formControlName="title"
                   [validator]="clientForm.controls['title']"
                   [validation_messages]="validationMessages.title"
                   [isLessen]="true">
        </stf-input>
      </div>
    </div>

    <div class="mb-40"
         fxLayout="row">
      <label for="client-email"
             fxFlex="24%">
        <span>{{ 'generic.email' | translate }}*</span>
        <svg-icon class="info"
                  src="assets/icons/info.svg"
                  stfTooltip
                  stfTooltipText="account.email_info">
        </svg-icon>
      </label>
      <div fxFlex="auto">
        <stf-input id="client-email"
                   formControlName="email"
                   [validator]="clientForm.controls['email']"
                   [validation_messages]="validationMessages.email"
                   [isLessen]="true">
        </stf-input>
      </div>
    </div>

    <div class="mb-40">
      <div fxLayout="row">
        <label for="client-webhook"
               fxFlex="24%">
          <span>{{ 'account.nua_webhook' | translate }}</span>
          <svg-icon class="info"
                    src="assets/icons/info.svg"
                    stfTooltip
                    stfTooltipText="account.nua_webhook.help">
          </svg-icon>
        </label>
        <div fxFlex="auto">
          <stf-input id="client-webhook"
                     formControlName="webhook"
                     [isLessen]="true">
          </stf-input>
        </div>
      </div>
      <div class="hint">
        <ncom-hint label="Learn more about webhooks">
          <p>If webhook is defined, anytime a new result is available, Nuclia will make a <code>POST</code> call to this
            URL, sending the result as payload.</p>
          <a href="https://docs.nuclia.dev/docs/understanding/intro#use-a-webhook"
             target="_new">Learn more</a>
        </ncom-hint>
      </div>
    </div>

    <div class="zone">
      <h2>{{ 'generic.zone' | translate }}</h2>
      <div class="mb-24">{{ 'account.db_zone_description' | translate }}</div>
      <select stfSelect
              formControlName="zone"
              class="zone-select">
        <option *ngFor="let zone of (zones | async)"
                [value]="zone.id">{{ zone.title }}</option>
      </select>
    </div>

    <div class="mt-40"
         fxLayout="row"
         fxLayoutAlign="center center"
         fxLayoutGap="10px">
      <stf-button type="submit"
                  minWidth="110px">
        {{ 'generic.save' | translate }}
      </stf-button>
      <stf-button (click)="close()"
                  type="button"
                  color="gray"
                  minWidth="110px">
        {{ 'generic.cancel' | translate }}
      </stf-button>
    </div>
  </form>
</div>