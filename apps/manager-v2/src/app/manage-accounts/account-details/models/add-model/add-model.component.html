<h3>Add model</h3>
<form
  [formGroup]="modelForm"
  (ngSubmit)="create()">
  <pa-input formControlName="description">Name</pa-input>
  <pa-input
    formControlName="location"
    help='Use format: "provider:model"'>
    Model
  </pa-input>
  <pa-select
    formControlName="model_types"
    [options]="modelTypes"
    multiple
    label="Model types"></pa-select>
  <pa-select
    formControlName="zone"
    [options]="zones | async"
    label="Zone"></pa-select>

  @if (schema | async; as schema) {
    @if (openaiCompat | async; as openaiCompat) {
      <stf-user-keys
        [generativeModel]="openaiCompat"
        [learningConfigurations]="schema"
        (formReady)="userKeysForm = $event"></stf-user-keys>
    }
  }

  <section>
    <label class="title-s">Enable on Knowledge Boxes:</label>
    @for (kb of kbList; track kb.id) {
      <pa-checkbox [(value)]="selectedKbs[kb.id]">{{ kb.title }}</pa-checkbox>
    }
  </section>

  <footer>
    <pa-button
      type="submit"
      [disabled]="modelForm.pristine || modelForm.invalid || userKeysForm?.invalid || isSaving">
      Save
    </pa-button>
  </footer>
</form>
