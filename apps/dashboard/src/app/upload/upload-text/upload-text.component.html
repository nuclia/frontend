<div class="upload-dialog upload-text">
  <h1>
    {{ 'upload.upload_from_csv' | translate }}
    <pa-button
      class="close-upload-button"
      icon="cross"
      aspect="basic"
      (click)="close()">
      {{ 'generic.close' | translate }}
    </pa-button>
  </h1>

  <p class="upload-help body-s">
    <span [innerHtml]="'upload.csv_description' | translate"></span>
    <br />
    <span [innerHtml]="'upload.csv_format' | translate"></span>
    <br />
    <span [innerHtml]="'upload.csv_labels' | translate"></span>
  </p>

  <ncom-hint label="CSV format details">
    <ul class="csv-format">
      <li *ngFor="let spec of specs">{{ spec }}</li>
    </ul>
  </ncom-hint>

  <div class="select-csv">
    <pa-button
      kind="primary"
      (click)="fileUpload.click()">
      {{ 'upload.select_csv' | translate }}
    </pa-button>
    <input
      (change)="readCSV($event)"
      #fileUpload
      type="file"
      accept="text/csv"
      hidden />
  </div>

  <div
    class="upload-list"
    *ngIf="csv.length > 0">
    <div
      *ngFor="let row of csv"
      class="upload">
      <span
        class="title"
        paEllipsisTooltip>
        {{ row[0] }}
      </span>
      <code class="field">{{ row[2] }}</code>
      <span class="field">
        {{ row[3].length ? ('upload.labels_number' | translate: { num: row[3].length }) : '' }}
      </span>
    </div>
  </div>

  <nsi-spinner
    *ngIf="isUploading"
    size="small"></nsi-spinner>

  <div class="buttons">
    <pa-button
      aspect="basic"
      (click)="close()">
      {{ 'generic.cancel' | translate }}
    </pa-button>
    <pa-button
      type="submit"
      kind="primary"
      (click)="upload()"
      [disabled]="csv.length === 0 || isUploading">
      {{ 'generic.add' | translate }}
    </pa-button>
  </div>
</div>
