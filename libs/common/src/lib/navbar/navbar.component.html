<div
  class="app-navbar"
  [class.is-unfolded]="isUnfolded">
  <div class="navbar-scroll-container">
    <div
      *ngIf="!(inAccount | async)"
      class="navbar-content">
      <div class="nav-group">
        <div class="group-items">
          <a
            [routerLink]="kbUrl"
            class="nav-link"
            routerLinkActive="active"
            data-cy="go-to-home"
            [routerLinkActiveOptions]="{ exact: true }">
            <pa-icon name="home"></pa-icon>
            <span class="nav-link-title">{{ 'stash.home.link' | translate }}</span>
          </a>
        </div>
      </div>
      <div class="nav-group">
        <div class="group-items">
          <a
            [routerLink]="(isAdminOrContrib | async) && !(invalidKey | async) ? kbUrl + '/upload' : null"
            class="nav-link"
            routerLinkActive="active"
            data-cy="go-to-upload"
            [routerLinkActiveOptions]="{ exact: true }"
            [class.disabled]="!(isAdminOrContrib | async) || (invalidKey | async)">
            <pa-icon name="upload"></pa-icon>
            <span class="nav-link-title">{{ 'stash.upload_data' | translate }}</span>
          </a>
          <a
            class="nav-link"
            data-cy="go-to-search"
            routerLinkActive="active"
            [routerLink]="!(invalidKey | async) ? kbUrl + '/search' : null"
            [class.disabled]="invalidKey | async">
            <pa-icon name="search"></pa-icon>
            <span class="nav-link-title">{{ 'stash.search' | translate }}</span>
          </a>
          <a
            [routerLink]="!(invalidKey | async) ? kbUrl + '/resources' : null"
            routerLinkActive="active"
            class="nav-link"
            data-cy="go-to-resources"
            [class.disabled]="invalidKey | async">
            <pa-icon name="list"></pa-icon>
            <span class="nav-link-title">{{ 'stash.side.list' | translate }}</span>
          </a>
          <a
            [routerLink]="(isAdmin | async) && !(invalidKey | async) ? kbUrl + '/widget-generator' : null"
            routerLinkActive="active"
            class="nav-link"
            data-cy="go-to-widget"
            [class.disabled]="!(isAdmin | async) || (invalidKey | async)">
            <pa-icon name="widget"></pa-icon>
            <span class="nav-link-title">{{ 'stash.side.widgets' | translate }}</span>
          </a>
        </div>
      </div>
      <div class="nav-group">
        <div class="group-items">
          <a
            (click)="toggleSettings()"
            (keyup.enter)="toggleSettings()"
            class="nav-link"
            data-cy="go-to-advanced"
            paFocusable
            [paFocusDisabled]="!(isAdminOrContrib | async) || (invalidKey | async)"
            [class.disabled]="!(isAdminOrContrib | async) || (invalidKey | async)">
            <pa-icon [name]="showSettings ? 'chevron-up' : 'chevron-down'"></pa-icon>
            <span class="nav-link-title">{{ 'stash.side.advanced' | translate }}</span>
          </a>
        </div>
      </div>
      <ng-container *ngIf="showSettings">
        <div class="nav-group">
          <div class="group-items">
            <a
              [routerLink]="(isAdmin | async) && !(invalidKey | async) ? kbUrl + '/manage' : null"
              routerLinkActive="active"
              class="nav-link sub-item"
              data-cy="go-to-settings"
              [class.disabled]="!(isAdmin | async) || (invalidKey | async)">
              <pa-icon name="gear"></pa-icon>
              <span class="nav-link-title">{{ 'stash.side.settings' | translate }}</span>
            </a>
            <ng-container *ngIf="!standalone">
              <a
                *ngIf="(isTrial | async) === false"
                [routerLink]="(isAdminOrContrib | async) ? kbUrl + '/activity/download' : null"
                routerLinkActive="active"
                class="nav-link sub-item"
                data-cy="go-to-activity-log"
                [class.disabled]="!(isAdminOrContrib | async)">
                <pa-icon name="activity-log"></pa-icon>
                <span class="nav-link-title">{{ 'stash.side.activity' | translate }}</span>
              </a>

              <a
                *ngIf="isAdmin | async"
                [routerLink]="kbUrl + '/keys'"
                routerLinkActive="active"
                data-cy="go-to-api-keys"
                class="nav-link sub-item">
                <pa-icon name="lock-off"></pa-icon>
                <span class="nav-link-title">{{ 'stash.side.api_keys' | translate }}</span>
              </a>
            </ng-container>
            <a
              [routerLink]="!(invalidKey | async) ? kbUrl + '/label-sets' : null"
              routerLinkActive="active"
              class="nav-link sub-item"
              data-cy="go-to-classification"
              [class.disabled]="invalidKey | async">
              <pa-icon name="label"></pa-icon>
              <span class="nav-link-title">{{ 'stash.side.classification' | translate }}</span>
            </a>
            <a
              *ngIf="isEntitiesEnabled | async"
              [routerLink]="!(invalidKey | async) ? kbUrl + '/entities' : null"
              routerLinkActive="active"
              class="nav-link sub-item"
              data-cy="go-to-ner"
              [class.disabled]="invalidKey | async">
              <pa-icon name="form"></pa-icon>
              <span class="nav-link-title">{{ 'generic.named-entities' | translate }}</span>
            </a>
            <ng-container *ngIf="!standalone">
              <a
                *ngIf="isSynonymsEnabled | async"
                [routerLink]="[kbUrl + '/synonyms']"
                routerLinkActive="active"
                data-cy="go-to-synonyms"
                class="nav-link sub-item">
                <pa-icon name="synonyms"></pa-icon>
                <span class="nav-link-title">{{ 'stash.side.synonyms' | translate }}</span>
              </a>
              <a
                *ngIf="isTrainingEnabled | async"
                [routerLink]="(isAdmin | async) ? kbUrl + '/training' : null"
                routerLinkActive="active"
                class="nav-link sub-item"
                data-cy="go-to-trainings"
                [class.disabled]="!(isAdmin | async)">
                <pa-icon name="submenu"></pa-icon>
                <span class="nav-link-title">{{ 'stash.side.trainings' | translate }}</span>
              </a>
              <a
                *ngIf="isAccountManager | async"
                [routerLink]="kbUrl + '/users'"
                routerLinkActive="active"
                data-cy="go-to-users"
                class="nav-link sub-item">
                <pa-icon name="users"></pa-icon>
                <span class="nav-link-title">{{ 'stash.side.users' | translate }}</span>
              </a>
            </ng-container>
          </div>
        </div>
      </ng-container>
      <div
        class="nav-group"
        *ngIf="standalone">
        <div
          class="group-items"
          routerLink="/"
          data-cy="go-to-manage-kbs">
          <a class="nav-link">
            <pa-icon name="knowledge-box"></pa-icon>
            <span class="nav-link-title">{{ 'stash.side.manage-kbs' | translate }}</span>
          </a>
        </div>
      </div>
    </div>
    <div
      *ngIf="(inAccount | async) && (isAccountManager | async)"
      class="navbar-content dark">
      <div class="nav-group">
        <div class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/home'"
            routerLinkActive="active"
            data-cy="go-to-account-home"
            class="nav-link">
            <pa-icon name="home"></pa-icon>
            <span class="nav-link-title">{{ 'account.home' | translate }}</span>
          </a>
        </div>
        <div class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/settings'"
            routerLinkActive="active"
            data-cy="go-to-account-settings"
            class="nav-link">
            <pa-icon name="gear"></pa-icon>
            <span class="nav-link-title">{{ 'account.settings' | translate }}</span>
          </a>
        </div>
        <div class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/kbs'"
            routerLinkActive="active"
            data-cy="go-to-account-kbs"
            class="nav-link">
            <pa-icon name="knowledge-box"></pa-icon>
            <span class="nav-link-title">{{ 'account.knowledgeboxes' | translate }}</span>
          </a>
        </div>
        <div class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/users'"
            routerLinkActive="active"
            data-cy="go-to-account-users"
            class="nav-link">
            <pa-icon name="users"></pa-icon>
            <span class="nav-link-title">{{ 'account.users' | translate }}</span>
          </a>
        </div>
        <div class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/nua'"
            routerLinkActive="active"
            data-cy="go-to-nua-keys"
            class="nav-link">
            <pa-icon name="key"></pa-icon>
            <span class="nav-link-title">{{ 'account.nua_keys' | translate }}</span>
          </a>
        </div>
        <div
          *ngIf="isBillingEnabled | async"
          class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/billing'"
            routerLinkActive="active"
            data-cy="go-to-billing"
            class="nav-link">
            <pa-icon name="payment"></pa-icon>
            <span class="nav-link-title">{{ 'account.billing' | translate }}</span>
          </a>
        </div>
        <div
          *ngIf="isSyncEnabled | async"
          class="group-items">
          <a
            [routerLink]="(accountUrl | async) + '/sync'"
            routerLinkActive="active"
            data-cy="go-to-sync"
            class="nav-link">
            <pa-icon name="upload"></pa-icon>
            <span class="nav-link-title">{{ 'account.sync' | translate }}</span>
          </a>
        </div>
      </div>
      <div
        class="nav-group"
        *ngIf="kb | async">
        <div class="group-items">
          <a
            [routerLink]="kbUrl"
            data-cy="go-to-home-from-account"
            class="nav-link">
            <pa-icon name="chevron-left"></pa-icon>
            <span class="nav-link-title">{{ 'generic.back' | translate }}</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
