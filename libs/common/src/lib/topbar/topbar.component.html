<div class="topbar">
  <button
    class="topbar-logo"
    (click)="goToHome()">
    <img
      [src]="!standalone ? 'assets/logos/logo.svg' : 'assets/logos/nucliadb.svg'"
      class="topbar-logo-expanded"
      [alt]="!standalone ? 'Nuclia' : 'NucliaDB'" />
    <img
      *ngIf="isStage"
      src="assets/logos/stage-icon.svg"
      class="is-stage"
      alt="Stage" />
    <img
      [src]="!standalone ? 'assets/logos/nuclia-symbol.svg' : 'assets/logos/nucliadb-symbol.svg'"
      class="topbar-logo-collapsed"
      [alt]="!standalone ? 'Nuclia' : 'NucliaDB'" />
  </button>

  <pa-button
    *ngIf="showDemo"
    kind="primary"
    aspect="basic"
    paFocusable
    (click)="bookDemo()"
    (keyup.enter)="bookDemo()">
    <a
      href="https://calendly.com/nuclia/30min?back=1&month=2023-10"
      target="_blank">
      {{ 'need-help-book-demo' | translate }}
    </a>
  </pa-button>

  <div class="topbar-actions">
    <pa-button
      *ngIf="!standalone && (accountType | async) && (isAccountManager | async)"
      kind="primary"
      aspect="basic"
      size="small"
      [routerLink]="billingUrl | async">
      {{ 'account.type.' + (accountType | async) | translate }}
    </pa-button>

    <div
      *ngIf="((userInfo | async)?.accounts?.length || 0) > 1"
      class="topbar-account">
      <strong>{{ (kb | async)?.account }}</strong>
    </div>

    <app-kb-switch></app-kb-switch>

    <app-user-menu
      data-cy="user-menu"
      *ngIf="!standalone"
      [userInfo]="userInfo | async"></app-user-menu>

    <ng-container *ngIf="standalone">
      <div
        class="standalone-config"
        [paTooltip]="(errorMessage | async) || ''">
        <pa-icon
          [name]="(hasValidKey | async) === true ? 'circle-check' : 'warning'"
          [class]="(hasValidKey | async) === true ? 'valid' : 'invalid'"></pa-icon>
        <div class="title-xs">nuclia.cloud</div>
      </div>
    </ng-container>
  </div>
</div>
