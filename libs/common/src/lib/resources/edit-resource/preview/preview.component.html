<div class="main-container">
  <div class="scrollable-area">
    @if (errors) {
      <div class="error-container">
        <p>
          <pa-icon
            name="warning"
            size="small"></pa-icon>
          {{ errors.body }}
        </p>
      </div>
    }

    @if (loaded) {
      @for (paragraph of paragraphs | async; track paragraph.paragraphId) {
        <div class="paragraph-container">
          <p>{{ paragraph.text }}</p>
        </div>
      }

      @if ((paragraphs | async)?.length === 0 && !(jsonTextField | async)) {
        <div class="paragraph-container">
          <p>{{ 'resource.field-no-paragraph' | translate }}</p>
        </div>
      }

      @if (jsonTextField | async) {
        <div class="paragraph-container">
          <pre><code>{{ jsonTextField | async }}</code></pre>
        </div>
      }
    } @else if (noField | async) {
      <div class="paragraph-container">
        <p>{{ 'resource.error.no-field' | translate }}</p>
      </div>
    } @else {
      <nsi-delayed-spinner size="medium"></nsi-delayed-spinner>
    }
  </div>
  <div class="viewer-button-container">
    @if (loaded) {
      <pa-button
        [disabled]="loadingPreview"
        (click)="openViewer()">
        {{ 'resource.preview.open-viewer' | translate }}
      </pa-button>
    }
  </div>
</div>

<div class="viewer-container">
  <div [innerHTML]="viewerWidget | async"></div>
</div>
