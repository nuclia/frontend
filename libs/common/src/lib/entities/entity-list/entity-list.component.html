<div
  #listContainer
  class="ner-list-container">
  <pa-table columns="96px 1fr 3fr">
    <pa-table-header>
      <pa-table-row>
        <pa-table-cell header><div class="whitespace"></div></pa-table-cell>
        <pa-table-cell header>{{ 'generic.named-entities' | translate }}</pa-table-cell>
        <pa-table-cell header>{{ 'ner-list.duplicates' | translate }}</pa-table-cell>
      </pa-table-row>
    </pa-table-header>

    <pa-table-row
      *ngFor="let ner of entities; trackBy: trackByValue"
      [clickable]="deletedNer !== ner.value"
      [disabled]="deletedNer === ner.value">
      <pa-table-cell>
        <div
          class="table-row-actions"
          [class.stay-visible]="duplicatedEntity?.value === ner.value">
          <pa-button
            icon="trash"
            kind="destructive"
            aspect="basic"
            iconSize="small"
            size="small"
            paTooltip="ner-list.delete-entity-tooltip"
            [disabled]="deletedNer === ner.value"
            (click)="deleteEntity(ner)">
            {{ 'ner-list.add-duplicate-tooltip' | translate }}
          </pa-button>
          <pa-button
            icon="circle-plus"
            aspect="basic"
            iconSize="small"
            size="small"
            paTooltip="ner-list.add-duplicate-tooltip"
            [paPopup]="duplicateOf"
            [disabled]="deletedNer === ner.value">
            {{ 'ner-list.add-duplicate-tooltip' | translate }}
          </pa-button>
          <pa-popup
            #duplicateOf
            (onClose)="duplicatedEntity = undefined"
            (onOpen)="openDuplicatesOfPopup(ner)">
            <div class="duplicate-of-popup">
              <label
                for="entityInput"
                class="body-xs">
                {{ 'ner-list.duplicates-of' | translate }}
              </label>
              <input
                #entityInput
                id="entityInput"
                class="entity-input"
                paFocusable
                (keyup)="getMatchingEntities($event)" />
              <ul class="suggested-entities">
                <pa-option
                  *ngFor="let entity of matchingEntities"
                  [value]="entity.value"
                  (selectOption)="addDuplicateOf(entity)">
                  {{ entity.value }}
                </pa-option>
              </ul>
            </div>
          </pa-popup>
        </div>
      </pa-table-cell>
      <pa-table-cell>
        {{ ner.value }}
      </pa-table-cell>
      <pa-table-cell>
        <div class="duplicate-list">
          <div *ngFor="let duplicate of ner.represents">
            <pa-button
              class="table-row-action"
              icon="circle-minus"
              aspect="basic"
              iconSize="small"
              size="small"
              paTooltip="ner-list.remove-duplicate-tooltip"
              (click)="removeDuplicate(ner, duplicate)">
              {{ 'ner-list.remove-duplicate-tooltip' | translate }}
            </pa-button>
            {{ duplicate }}
          </div>
        </div>
      </pa-table-cell>
    </pa-table-row>
  </pa-table>
</div>

<!--
<div
  *ngIf="filteredEntities() as entities"
  class="entity-list"
  cdkDropListGroup>
  <div
    *ngIf="searchResults && entities.length === 0"
    class="entity-list-empty">
    <div class="entity-list-item">
      <div class="entity-list-item-cell cell-color">
        <div class="color-border"></div>
      </div>
      <div class="entity-list-item-cell">
        <span [innerHtml]="'generic.no_results_for' | translate"></span>
        <span>&nbsp;</span>
        <strong>{{ searchTerm }}</strong>
      </div>
    </div>
  </div>

  <cdk-virtual-scroll-viewport
    class="entity-list-virtual"
    [itemSize]="entityHeight"
    #virtualContainer
    [style.height.px]="getListHeight()">
    <ng-container *cdkVirtualFor="let entity of entities">
      <div
        class="entity-list-item"
        [class.highlighted]="isHighlighted(entity)"
        cdkDropList
        (cdkDropListDropped)="dragDrop($event)"
        [cdkDropListData]="entity"
        (cdkDropListEntered)="dragEnter($event)"
        (cdkDropListExited)="dragExit($event)"
        [cdkDropListSortingDisabled]="true"
        cdkDropListOrientation="horizontal">
        <div class="entity-list-item-cell cell-color">
          <div class="color-border"></div>
        </div>
        <div class="entity-list-item-cell cell-name">
          <span
            class="drag"
            [class.active]="editMode"
            cdkDrag
            [cdkDragDisabled]="!editMode"
            [cdkDragData]="entity">
            <app-entity-name
              [entity]="entity"
              [editMode]="editMode"
              [group]="group"
              (delete)="deleteEntity(entity)"></app-entity-name>
            <div
              *cdkDragPlaceholder
              class="empty-placeholder"></div>
          </span>
        </div>
        <div class="entity-list-item-cell cell-synonyms min-width-0">
          <div
            fxLayout="row"
            fxLayoutGap="10px"
            class="min-width-0">
            <app-synonym-add
              *ngIf="editMode"
              (add)="addSynonym(entity, $event)"
              [entities]="entities"
              [ignore]="[entity]"></app-synonym-add>
            <app-synonym-list
              fxFlex="1 1 0"
              class="min-width-0"
              (unlink)="unlinkSynonym(entity, $event)"
              (delete)="deleteEntity($event)"
              [editMode]="editMode"
              [synonyms]="entitiesGroup?.getSynonyms(entity.value) || []"
              [group]="group"></app-synonym-list>
          </div>
        </div>
        <div class="entity-list-item-cell cell-description"></div>
        <div class="entity-list-item-cell cell-presence"></div>
        <div class="entity-list-item-cell cell-actions"></div>
      </div>
    </ng-container>
  </cdk-virtual-scroll-viewport>
</div>
-->
